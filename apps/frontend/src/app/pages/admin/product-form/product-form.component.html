<div class="form-container">
  <form class="product-form" [formGroup]="productForm" (ngSubmit)="onSubmit()">
    <h2>{{ pageTitle }}</h2>

    <div class="form-group">
      <label for="name">Nombre del Producto</label>
      <input id="name" type="text" formControlName="name" placeholder="Ej: Teclado Mecánico HyperX">
      @if (productForm.get('name')?.invalid && (productForm.get('name')?.dirty || productForm.get('name')?.touched)) {
        <div class="error-message">
          @if (productForm.get('name')?.hasError) { <p>El nombre es requerido.</p> }
          @if (productForm.get('name')?.hasError) { <p>Debe tener al menos 3 caracteres.</p> }
        </div>
      }
    </div>

    <div class="form-group">
      <label for="description">Descripción</label>
      <textarea id="description" formControlName="description" rows="4" placeholder="Describe las características principales del producto..."></textarea>
      @if (productForm.get('description')?.invalid && (productForm.get('description')?.dirty || productForm.get('description')?.touched)) {
        <div class="error-message">
          @if (productForm.get('description')?.hasError) { <p>La descripción es requerida.</p> }
          @if (productForm.get('description')?.hasError) { <p>Debe tener al menos 10 caracteres.</p> }
        </div>
      }
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="price">Precio (ARS)</label>
        <input id="price" type="number" formControlName="price" placeholder="0.00">
        @if (productForm.get('price')?.invalid && (productForm.get('price')?.dirty || productForm.get('price')?.touched)) {
          <div class="error-message">
            @if (productForm.get('price')?.hasError) { <p>El precio es requerido.</p> }
            @if (productForm.get('price')?.hasError) { <p>El precio no puede ser negativo.</p> }
          </div>
        }
      </div>

      <div class="form-group">
        <label for="stock">Stock</label>
        <input id="stock" type="number" formControlName="stock" placeholder="0">
        @if (productForm.get('stock')?.invalid && (productForm.get('stock')?.dirty || productForm.get('stock')?.touched)) {
          <div class="error-message">
            @if (productForm.get('stock')?.hasError) { <p>El stock es requerido.</p> }
            @if (productForm.get('stock')?.hasError) { <p>El stock no puede ser negativo.</p> }
          </div>
        }
      </div>
    </div>

    <div class="form-group">
      <label for="imageUrl">URL de la Imagen</label>
      <input id="imageUrl" type="url" formControlName="imageUrl" placeholder="https://ejemplo.com/imagen.jpg">
      @if (productForm.get('imageUrl')?.invalid && (productForm.get('imageUrl')?.dirty || productForm.get('imageUrl')?.touched)) {
        <div class="error-message">
          @if (productForm.get('imageUrl')?.hasError) { <p>La URL de la imagen es requerida.</p> }
          @if (productForm.get('imageUrl')?.hasError) { <p>Debe ser una URL válida (http://... o https://...).</p> }
        </div>
      }
    </div>

    <div class="form-actions">
      <button type="button" class="cancel-btn" (click)="onCancel()">Cancelar</button>
      <button type="submit" class="submit-btn" [disabled]="productForm.invalid || isLoading">
        {{ isLoading ? 'Guardando...' : (isEditMode ? 'Actualizar Producto' : 'Crear Producto') }}
      </button>
    </div>
  </form>
</div>
